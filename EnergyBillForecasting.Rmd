---
title: "EnergyForecasting"
author: "P Rode"
date: "1/3/2021"
output: html_document
---

```{r setup, echo="FALSE", results='hide', include=FALSE }

###############################################################################
#                             Set up envirment                                #
###############################################################################


  # Enviroment 
  # Loading and preprocessing the data
  #Set up enviroment for R scrip  
  # Packages for tidyverse 
    library("tidyverse")
    library("gridExtra")
    library("lubridate")
  # Package for building tables in markdown and notebook 
    library("knitr")
    library("kableExtra") 
    library("xtable")
  # Packages for forecasting
    library("fable")
  library("tsibble")
  library("feasts")
  library("tsibbledata")
  # Packages for reading excel and html files and XML
    library("openxlsx")
    library("XML")
  # Parkage for using data tables for very large data operations
    library("data.table")
    library("tidyfast")
    library("dtplyr")
  #Package for reading fixed width tables
    library("utils")
  # Packages for reading data through API's 
    library("httr")
    library("jsonlite")
  # Package for performing inquires with SQL databases 
    library("sqldf")
  #Package for reading and writing to jpeg files
    library("jpeg")

  # Set proper working Dir 
    if (!getwd() == "C:/Users/paulr/Documents/R/EnergyForecasting") {setwd("C:/Users/paulr/Documents/R/EnergyForecasting")}

# Check for data directory and if one is not present then make it
if (!file.exists("data")) {
  dir.create("data")
}
```



```{r, echo="FALSE", results='hide', include=FALSE }

###############################################################################
#                     Read data in and get date formats right                 #
###############################################################################


setAs("character","myDate", function(from) {mdy_hm(from)})

Electric_Data <- fread("C:/Users/paulr/Documents/R/EnergyForecasting/data/MACH Energy - Data (4).csv", colClasses = c(Date = "myDate", Value = "integer", Unit = "character"), stringsAsFactors = TRUE)

Steam_Data <- fread("C:/Users/paulr/Documents/R/EnergyForecasting/data/MACH Energy - Data (3).csv", colClasses = c("myDate", "integer", "Character"), stringsAsFactors = TRUE)
Steam_Data[, Value := as.integer(Value)]
Steam_Data[, ymdDate := date(Date)]
Steam_Data[, .(Value = sum(Value)), by = ymdDate] -> SteamPerDay #Summarise kWh per day. 

CoolingDD <- fread("C:/Users/paulr/Documents/R/EnergyForecasting/data/ClimateDivisions.Cooling.txt")
```


```{r, echo="FALSE", results='hide', include=FALSE }

###############################################################################
#                               Do Simple Plots                               #
###############################################################################

ggplot(Steam_Data, aes(ymdDate, Value)) + 
  geom_boxplot(aes(group=month(ymdDate)))

ggplot(data=SteamPerDay, aes(x=ymdDate, y=Value)) + 
  geom_line(size=0.001) + 
  labs(x = "Date", y = "mlb") + 
  theme_bw() 

ggplot(data=SteamPerDay, aes(x=ymdDate, y=Value)) + 
  geom_area(size=0.001) + 
  labs(x = "Date", y = "mlb") + 
  theme_bw() 

#SteamPerDay[ymdDate = "2019-01-13",]-> steam

```
